function createReferenceLP(rlpId,rlpType,pContactType) 	{	var updating = false;	var capContResult = aa.people.getCapContactByCapID(capId);	if (capContResult.getSuccess())		{ conArr = capContResult.getOutput();  }	else		{		logDebug ("**ERROR: getting cap contact: " + capAddResult.getErrorMessage());		return false;		}	if (!conArr.length)		{		logDebug ("**WARNING: No contact available");		return false;		}	var newLic = getRefLicenseProf(rlpId)	if (newLic)		{		updating = true;		logDebug("Updating existing Ref Lic Prof : " + rlpId);		}	else		var newLic = aa.licenseScript.createLicenseScriptModel();	if (pContactType==null)		var cont = conArr[0]; 	else		{		var contFound = false;		for (yy in conArr)			{			if (pContactType.equals(conArr[yy].getCapContactModel().getPeople().getContactType()))				{				cont = conArr[yy];				contFound = true;				break;				}			}		if (!contFound)			{			logDebug ("**WARNING: No Contact found of type: "+pContactType);			return false;			}		}	peop = cont.getPeople();	addr = peop.getCompactAddress();	newLic.setContactFirstName(peop.getFirstName());	logDebug("FName " + peop.getFirstName());	newLic.setContactLastName(peop.getLastName());	logDebug("LName " + peop.getLastName());	newLic.setBusinessName(peop.getBusinessName());	logDebug("Bus " + peop.getBusinessName());	newLic.setAddress1(addr.getAddressLine1());	logDebug("Addr1 " + addr.getAddressLine1());	newLic.setAddress2(addr.getAddressLine2());	newLic.setCity(addr.getCity());	logDebug("City " + addr.getCity());	newLic.setState(addr.getState());	logDebug("State " + addr.getState());	newLic.setZip(addr.getZip());	logDebug("Zip " + addr.getZip());	newLic.setPhone1(peop.getPhone1());	logDebug("Phone1 " + peop.getPhone1());	newLic.setPhone2(peop.getPhone2());	newLic.setEMailAddress(peop.getEmail());	logDebug("Email " + peop.getEmail());	newLic.setFax(peop.getFax());	newLic.setAgencyCode(aa.getServiceProviderCode());	newLic.setAuditDate(sysDate);	newLic.setAuditID(currentUserID);	newLic.setAuditStatus("A");	if (AInfo["Insurance Co"]) 		newLic.setInsuranceCo(AInfo["Insurance Co"]);	if (AInfo["Insurance Amount"]) 		newLic.setInsuranceAmount(parseFloat(AInfo["Insurance Amount"]));	if (AInfo["Insurance Exp Date"]) 	newLic.setInsuranceExpDate(aa.date.parseDate(AInfo["Insurance Exp Date"]));	if (AInfo["Policy #"]) 			newLic.setPolicy(AInfo["Policy #"]);	if (AInfo["Business License #"]) 	newLic.setBusinessLicense(AInfo["Business License #"]);	if (AInfo["Business License Exp Date"]) newLic.setBusinessLicExpDate(aa.date.parseDate(AInfo["Business License ExpDate"]));	newLic.setLicenseType(rlpType);	newLic.setLicState(addr.getState());	newLic.setStateLicense(rlpId);	if (updating)		{			myResult = aa.licenseScript.editRefLicenseProf(newLic);			logDebug("Successfully updated License No. " + rlpId + ", Type: " + rlpType + " Sequence Number " + myResult.getOutput());		}	else		{			myResult = aa.licenseScript.createRefLicenseProf(newLic);			logDebug("Successfully added License No. " + rlpId + ", Type: " + rlpType + " Sequence Number " + myResult.getOutput());		}	if (!myResult.getSuccess())		{		logDebug("**ERROR: can't create ref lic prof: " + myResult.getErrorMessage());		return null;		}	if (newLic==null)		{			logDebug("new Lic object is jacked up");		}	if (myResult.getOutput()==null)		{			logDebug("ok so well find it using the other method");			var lpsm = getRefLicenseProf(rlpId);		}	else		{			lpsmResult = aa.licenseScript.getRefLicenseProfBySeqNbr(servProvCode,myResult.getOutput())			if (!lpsmResult.getSuccess())				{ logDebug("**WARNING error retrieving the LP just created " + lpsmResult.getErrorMessage()) ; return null}