function getRelatedCapsByParcel(ats) { 	var retArr = new Array();	var capParcelResult = aa.parcel.getParcelandAttribute(capId,null);	if (capParcelResult.getSuccess()) { 		var Parcels = capParcelResult.getOutput().toArray(); 	} else { 		logDebug("**ERROR: getting parcels by cap ID: " + capParcelResult.getErrorMessage()); 		return false; 	}	for (zz in Parcels) {		var ParcelValidatedNumber = Parcels[zz].getParcelNumber();		var capAddResult = aa.cap.getCapListByParcelID(ParcelValidatedNumber,null);		if (capAddResult.getSuccess()) { 			var capIdArray = capAddResult.getOutput();		} else { 			logDebug("**ERROR: getting similar parcels: " + capAddResult.getErrorMessage());  			return false; 		}		for (cappy in capIdArray) {			if (capId.getCustomID().equals(capIdArray[cappy].getCustomID())) continue;			var relcapResult = aa.cap.getCap(capIdArray[cappy].getCapID());			if (relcapResult.getSuccess()) {				relcap = relcapResult.getOutput();				var reltypeArray = relcap.getCapType().toString().split("/");				var isMatch = true;				var ata = ats.split("/");				if (ata.length != 4) {					logDebug("**ERROR: The following Application Type String is incorrectly formatted: " + ats);				} else {					for (xx in ata) {						if (!ata[xx].equals(reltypeArray[xx]) && !ata[xx].equals("*")) {							isMatch = false;						}					}				}				if (isMatch) {								retArr.push(capIdArray[cappy]);				}			}		} 	}	if (retArr.length > 0) {		return retArr;	} else {		return false;	}}